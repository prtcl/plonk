!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("plonk",["exports"],e):e(n.plonk=n.plonk||{})}(this,function(n){"use strict";function e(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null===n||"undefined"==typeof n?e:("string"==typeof n&&(n=+n),isNaN(n)?e:n)}function t(n,t,r){return n=e(n,0),t=e(t,0),r=e(r,1),arguments.length<=2&&(r=t||1,t=0),Math.min(Math.max(n,t),r)}function r(n){W.length||(I(),B=!0),W[W.length]=n}function i(){for(;G<W.length;){var n=G;if(G+=1,W[n].call(),G>J){for(var e=0,t=W.length-G;t>e;e++)W[e]=W[e+G];W.length-=G,G=0}}W.length=0,G=0,B=!1}function o(n){var e=1,t=new U(n),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}function u(n){return function(){function e(){clearTimeout(t),clearInterval(r),n()}var t=setTimeout(e,0),r=setInterval(e,50)}}function s(){if(Y.length)throw Y.shift()}function a(n){var e;e=X.length?X.pop():new f,e.task=n,V(e)}function f(){this.task=null}function c(){}function l(n){try{return n.then}catch(n){return en=n,tn}}function h(n,e){try{return n(e)}catch(n){return en=n,tn}}function p(n,e,t){try{n(e,t)}catch(n){return en=n,tn}}function v(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,n!==c&&k(n,this)}function d(n,e,t){return new n.constructor(function(r,i){var o=new v(c);o.then(r,i),m(n,new b(e,t,o))})}function m(n,e){for(;3===n._81;)n=n._65;return v._10&&v._10(n),0===n._81?0===n._45?(n._45=1,void(n._54=e)):1===n._45?(n._45=2,void(n._54=[n._54,e])):void n._54.push(e):void g(n,e)}function g(n,e){nn(function(){var t=1===n._81?e.onFulfilled:e.onRejected;if(null===t)return void(1===n._81?y(e.promise,n._65):w(e.promise,n._65));var r=h(t,n._65);r===tn?w(e.promise,en):y(e.promise,r)})}function y(n,e){if(e===n)return w(n,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var t=l(e);if(t===tn)return w(n,en);if(t===n.then&&e instanceof v)return n._81=3,n._65=e,void _(n);if("function"==typeof t)return void k(t.bind(e),n)}n._81=1,n._65=e,_(n)}function w(n,e){n._81=2,n._65=e,v._97&&v._97(n,e),_(n)}function _(n){if(1===n._45&&(m(n,n._54),n._54=null),2===n._45){for(var e=0;e<n._54.length;e++)m(n,n._54[e]);n._54=null}}function b(n,e,t){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof e?e:null,this.promise=t}function k(n,e){var t=!1,r=p(n,function(n){t||(t=!0,y(e,n))},function(n){t||(t=!0,w(e,n))});t||r!==tn||(t=!0,w(e,en))}function j(n){var e=new on(on._61);return e._81=1,e._65=n,e}function R(){}function O(){return new yn}function H(){return wn()}function T(n){function t(){i.resolve(o.elapsed),o.stop()}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R,i=new yn,o=new _n(n,function(){var u=r(o.interval,o.iterations,o.elapsed,t);o.time=n=e(u,n),i.notify(o.interval)});return o.run(),i.promise}function M(n,t){return arguments.length<=1?(t=e(n,1),n=0):(n=e(n,0),t=e(t,1)),Math.random()*(t-n)+n}function E(n,r,i){n=e(n,0),r=e(r,1),i=t(e(i,.1),0,1),arguments.length<=1&&(r=n||1,n=0);var o=M(n,r);return function(u){return i=e(u,i),o=t(o+r*M(-1,1)*i,n,r)}}function x(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R;return n=e(n,10),t=e(t,100),arguments.length<=2&&(t=n,n=0),T(M(n,t),function(e,i,o,u){return r(e,i,o,u),M(n,t)})}function F(n){function e(n){r.resolve(n),i.stop()}var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R,r=new yn,i=new _n(n,function(){var n=t(i.interval,i.iterations,i.elapsed,e);r.notify(n)});return i.run(),r.promise}function P(n,r,i,o,u){return n=e(n,0),r=e(r,0),i=e(i,1),o=e(o,0),u=e(u,1),o+(t(n,r,i)-r)*(u-o)/(i-r)}function S(n,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:R;return n=e(n,0),t=e(t,1),r=e(r,100),F(1e3/60,function(e,o,u,s){u>=r&&s(t);var a=P(u,0,r,n,t);return i(a),a})}function q(n){return n=e(n,0),Math.pow(t(n,0,1),Math.E)}function A(n){function r(){o.resolve(u.elapsed),u.stop()}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;2===arguments.length?n=t(e(n,60),1,60):1===arguments.length&&(i=n||i,n=60);var o=new yn,u=new bn(1e3/n,function(){var s=i(u.interval,u.iterations,u.elapsed,r);"number"==typeof s&&(n=t(e(s,n),0,60),0===n?r():u.time=1e3/n),o.notify(u.interval)});return u.run(),o.promise}function N(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ms",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e(r,0);if("string"==typeof n){n=n.toLowerCase();for(var o=0;o<jn.length;o++)if(-1!==n.indexOf(jn[o])){t=jn[o],n=n.replace(" ","").replace(t,"");break}n=+n}if(null===n||"undefined"==typeof n)return i;if(isNaN(n))return i;switch(t){case"hz":i=1/n*1e3;break;case"ms":i=n;break;case"s":i=1e3*n;break;case"m":i=60*n*1e3}return i}function C(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;n=e(n,0);var i=0;return F(1e3/60,function(o,u,s,a){i>=n?i=0:i+=o;var f=P(i,0,n,0,Rn),c=t(Math.sin(f),-1,1),l=r(c,i,s,a);return n=e(l,n),c})}function z(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R,r=new yn,i=new _n(e(n,0),function(e,o,u){n>u||(t(e),r.resolve(e),i.stop())});return i.run(),r.promise}function D(n,t,r){n=e(n,10),t=e(t,100),arguments.length<=2&&(t=n,n=0);var i=E(n,t);return T(i(),function(n,e,t,o){var u=r(n,e,t,o);return i(u)})}var I,K="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},L=r,W=[],B=!1,G=0,J=1024,Q="undefined"!=typeof K?K:self,U=Q.MutationObserver||Q.WebKitMutationObserver;I="function"==typeof U?o(i):u(i),r.requestFlush=I,r.makeRequestCallFromTimer=u;var V=L,X=[],Y=[],Z=V.makeRequestCallFromTimer(s),$=a;f.prototype.call=function(){try{this.task.call()}catch(n){a.onerror?a.onerror(n):(Y.push(n),Z())}finally{this.task=null,X[X.length]=this}};var nn=L,en=null,tn={},rn=v;v._10=null,v._97=null,v._61=c,v.prototype.then=function(n,e){if(this.constructor!==v)return d(this,n,e);var t=new v(c);return m(this,new b(n,e,t)),t};var on=rn,un=on,sn=j(!0),an=j(!1),fn=j(null),cn=j(void 0),ln=j(0),hn=j("");on.resolve=function(n){if(n instanceof on)return n;if(null===n)return fn;if(void 0===n)return cn;if(n===!0)return sn;if(n===!1)return an;if(0===n)return ln;if(""===n)return hn;if("object"==typeof n||"function"==typeof n)try{var e=n.then;if("function"==typeof e)return new on(e.bind(n))}catch(n){return new on(function(e,t){t(n)})}return j(n)},on.all=function(n){var e=Array.prototype.slice.call(n);return new on(function(n,t){function r(o,u){if(u&&("object"==typeof u||"function"==typeof u)){if(u instanceof on&&u.then===on.prototype.then){for(;3===u._81;)u=u._65;return 1===u._81?r(o,u._65):(2===u._81&&t(u._65),void u.then(function(n){r(o,n)},t))}var s=u.then;if("function"==typeof s){var a=new on(s.bind(u));return void a.then(function(n){r(o,n)},t)}}e[o]=u,0===--i&&n(e)}if(0===e.length)return n([]);for(var i=e.length,o=0;o<e.length;o++)r(o,e[o])})},on.reject=function(n){return new on(function(e,t){t(n)})},on.race=function(n){return new on(function(e,t){n.forEach(function(n){on.resolve(n).then(e,t)})})},on.prototype.catch=function(n){return this.then(null,n)};var pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},vn=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},dn=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),mn=function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},gn=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e},yn=function(){function n(){var e=this;vn(this,n),this.isResolved=!1,this.isRejected=!1,this.resolveHandler=R,this.rejectHandler=R,this.progressHandlers=[],this.promise=new un(function(n,t){e.resolveHandler=n,e.rejectHandler=t}),this.promise.progress=function(n){return e.isResolved?e.promise:("function"==typeof n&&e.progressHandlers.push(n),e.promise)}}return dn(n,[{key:"resolve",value:function(n){this.isResolved||(this.isResolved=!0,this.resolveHandler(n))}},{key:"reject",value:function(n){this.isRejected||(this.isRejected=!0,this.rejectHandler(n))}},{key:"notify",value:function(n){this.isResolved||this.isRejected||this.progressHandlers.forEach(function(e){$(function(){e(n)})})}}]),n}(),wn=function(){return"undefined"!=typeof performance&&"now"in performance?function(){return performance.now()}:"object"===("undefined"==typeof process?"undefined":pn(process))&&"[object process]"===process.toString()?function(){function n(){var n=process.hrtime();return 1e9*n[0]+n[1]}var e=n();return function(){return(n()-e)/1e6}}():function(){var n=Date.now();return function(){return Date.now()-n}}()}(),_n=function(){function n(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;vn(this,n),this._tickHandler=$,this._timeOffset=0,this.isRunning=!1,this.time=e(t,1e3/60),this.initialTime=this.time,this.callback=r,this.reset()}return dn(n,[{key:"run",value:function(){return this.isRunning?void 0:(this.isRunning=!0,this.prev=H(),this.tick(),this)}},{key:"tick",value:function(){var n=this;this.isRunning&&this._tickHandler(function(){return 0===n.iterations?(n.callback(0,0,0),n.prev=H(),n.iterations=1,n.tick()):(n.interval=H()-n.prev,n.interval<=n.time+n._timeOffset?n.tick():(n.elapsed+=n.interval,n.callback(n.interval,n.iterations,n.elapsed),void(n.isRunning&&(n.prev=H(),n.iterations+=1,n.tick()))))})}},{key:"stop",value:function(){var n=this.elapsed;return this.isRunning=!1,this.reset(),n}},{key:"reset",value:function(){return this.elapsed=0,this.iterations=0,this.interval=0,this.prev=0,this.time=this.initialTime,this}}]),n}(),bn=function(n){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;vn(this,e);var r=gn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,t));return r._tickHandler=kn,r._timeOffset=-5,r}return mn(e,n),e}(_n),kn=function(){var n;if("object"===("undefined"==typeof window?"undefined":pn(window)))for(var e=[window.requestAnimationFrame,window.webkitRequestAnimationFrame,window.mozRequestAnimationFrame],t=0;t<e.length;t++)if("function"==typeof e[t]){n=e[t].bind(window);break}return n||(n=$),n}(),jn=["hz","ms","s","m"],Rn=2*Math.PI-1e-4;n.clamp=t,n.defer=O,n.delay=T,n.drunk=E,n.dust=x,n.env=S,n.exp=q,n.frames=A,n.metro=F,n.ms=N,n.now=H,n.rand=M,n.scale=P,n.sine=C,n.wait=z,n.walk=D,Object.defineProperty(n,"__esModule",{value:!0})});
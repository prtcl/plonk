!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("plonk",["exports"],t):t(n.plonk=n.plonk||{})}(this,function(n){"use strict";function t(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null===n||"undefined"==typeof n?t:("string"==typeof n&&(n=+n),isNaN(n)?t:"number"!=typeof n?t:n)}function e(n,e,r){return n=t(n,0),e=t(e,0),r=t(r,1),arguments.length<=2&&(r=e||1,e=0),Math.min(Math.max(n,e),r)}function r(n){B.length||(K(),G=!0),B[B.length]=n}function i(){for(;J<B.length;){var n=J;if(J+=1,B[n].call(),J>Q){for(var t=0,e=B.length-J;e>t;t++)B[t]=B[t+J];B.length-=J,J=0}}B.length=0,J=0,G=!1}function o(n){var t=1,e=new V(n),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function u(n){return function(){function t(){clearTimeout(e),clearInterval(r),n()}var e=setTimeout(t,0),r=setInterval(t,50)}}function a(){if(Z.length)throw Z.shift()}function s(n){var t;t=Y.length?Y.pop():new f,t.task=n,X(t)}function f(){this.task=null}function c(){}function l(n){try{return n.then}catch(n){return en=n,rn}}function h(n,t){try{return n(t)}catch(n){return en=n,rn}}function p(n,t,e){try{n(t,e)}catch(n){return en=n,rn}}function v(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,n!==c&&k(n,this)}function d(n,t,e){return new n.constructor(function(r,i){var o=new v(c);o.then(r,i),m(n,new b(t,e,o))})}function m(n,t){for(;3===n._81;)n=n._65;return v._10&&v._10(n),0===n._81?0===n._45?(n._45=1,void(n._54=t)):1===n._45?(n._45=2,void(n._54=[n._54,t])):void n._54.push(t):void _(n,t)}function _(n,t){tn(function(){var e=1===n._81?t.onFulfilled:t.onRejected;if(null===e)return void(1===n._81?g(t.promise,n._65):y(t.promise,n._65));var r=h(e,n._65);r===rn?y(t.promise,en):g(t.promise,r)})}function g(n,t){if(t===n)return y(n,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var e=l(t);if(e===rn)return y(n,en);if(e===n.then&&t instanceof v)return n._81=3,n._65=t,void w(n);if("function"==typeof e)return void k(e.bind(t),n)}n._81=1,n._65=t,w(n)}function y(n,t){n._81=2,n._65=t,v._97&&v._97(n,t),w(n)}function w(n){if(1===n._45&&(m(n,n._54),n._54=null),2===n._45){for(var t=0;t<n._54.length;t++)m(n,n._54[t]);n._54=null}}function b(n,t,e){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.promise=e}function k(n,t){var e=!1,r=p(n,function(n){e||(e=!0,g(t,n))},function(n){e||(e=!0,y(t,n))});e||r!==rn||(e=!0,y(t,en))}function j(n){var t=new un(un._61);return t._81=1,t._65=n,t}function O(){}function T(){return new wn}function R(n,t){n._progressHandlers&&nn(function(){n._progressHandlers.forEach(function(n){n(t)})})}function H(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;setTimeout(n,0)}function P(n){function e(){i.resolve(o.elapsed),o.stop()}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,i=new wn,o=new jn(n,function(){var u=r(o.interval,o.iterations,o.elapsed,e);o.time=n=t(u,n),i.notify(o.interval)});return o.run(),i.promise}function E(n,e){return arguments.length<=1?(e=t(n,1),n=0):(n=t(n,0),e=t(e,1)),Math.random()*(e-n)+n}function M(n,r,i){n=t(n,0),r=t(r,1),i=e(t(i,.1),0,1),arguments.length<=1&&(r=n||1,n=0);var o=E(n,r);return function(u){return i=t(u,i),o=e(o+r*E(-1,1)*i,n,r)}}function F(n,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O;return n=t(n,10),e=t(e,100),arguments.length<=2&&(e=n,n=0),P(E(n,e),function(t,i,o,u){return r(t,i,o,u),E(n,e)})}function x(n){function t(n){r.resolve(n),i.stop()}var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,r=new wn,i=new jn(n,function(){var n=e(i.interval,i.iterations,i.elapsed,t);r.notify(n)});return i.run(),r.promise}function S(n,r,i,o,u){return n=t(n,0),r=t(r,0),i=t(i,1),o=t(o,0),u=t(u,1),o+(e(n,r,i)-r)*(u-o)/(i-r)}function q(n,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O;return n=t(n,0),e=t(e,1),r=t(r,100),x(1e3/60,function(t,o,u,a){u>=r&&a(e);var s=S(u,0,r,n,e);return i(s),s})}function A(n){return n=t(n,0),Math.pow(e(n,0,1),Math.E)}function N(n){function r(){o.resolve(u.elapsed),u.stop()}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;2===arguments.length?n=e(t(n,60),1,60):1===arguments.length&&(i=n||i,n=60);var o=new wn,u=new On(1e3/n,function(){var a=i(u.interval,u.iterations,u.elapsed,r);"number"==typeof a&&(n=e(t(a,n),0,60),0===n?r():u.time=1e3/n),o.notify(u.interval)});return u.run(),o.promise}function C(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ms",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t(r,0);if("string"==typeof n){n=n.toLowerCase();for(var o=0;o<Rn.length;o++)if(-1!==n.indexOf(Rn[o])){e=Rn[o],n=n.replace(" ","").replace(e,"");break}n=+n}if(null===n||"undefined"==typeof n)return i;if(isNaN(n))return i;switch(e){case"fps":i=1e3/n;break;case"hz":i=1/n*1e3;break;case"ms":i=n;break;case"s":i=1e3*n;break;case"m":i=60*n*1e3}return i}function D(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;n=t(n,0);var i=0;return x(1e3/60,function(o,u,a,s){i>=n?i=0:i+=o;var f=S(i,0,n,0,Hn),c=e(Math.sin(f),-1,1),l=r(c,i,a,s);return n=t(l,n),c})}function z(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;n=t(n,0);var r=new wn,i=kn();return setTimeout(function(){var n=kn()-i;e(n),r.resolve(n)},n),r.promise}function I(n,e,r){n=t(n,10),e=t(e,100),arguments.length<=2&&(e=n,n=0);var i=M(n,e);return P(i(),function(n,t,e,o){var u=r(n,t,e,o);return i(u)})}var K,L="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},W=r,B=[],G=!1,J=0,Q=1024,U="undefined"!=typeof L?L:self,V=U.MutationObserver||U.WebKitMutationObserver;K="function"==typeof V?o(i):u(i),r.requestFlush=K,r.makeRequestCallFromTimer=u;var X=W,Y=[],Z=[],$=X.makeRequestCallFromTimer(a),nn=s;f.prototype.call=function(){try{this.task.call()}catch(n){s.onerror?s.onerror(n):(Z.push(n),$())}finally{this.task=null,Y[Y.length]=this}};var tn=W,en=null,rn={},on=v;v._10=null,v._97=null,v._61=c,v.prototype.then=function(n,t){if(this.constructor!==v)return d(this,n,t);var e=new v(c);return m(this,new b(n,t,e)),e};var un=on,an=un,sn=j(!0),fn=j(!1),cn=j(null),ln=j(void 0),hn=j(0),pn=j("");un.resolve=function(n){if(n instanceof un)return n;if(null===n)return cn;if(void 0===n)return ln;if(n===!0)return sn;if(n===!1)return fn;if(0===n)return hn;if(""===n)return pn;if("object"==typeof n||"function"==typeof n)try{var t=n.then;if("function"==typeof t)return new un(t.bind(n))}catch(n){return new un(function(t,e){e(n)})}return j(n)},un.all=function(n){var t=Array.prototype.slice.call(n);return new un(function(n,e){function r(o,u){if(u&&("object"==typeof u||"function"==typeof u)){if(u instanceof un&&u.then===un.prototype.then){for(;3===u._81;)u=u._65;return 1===u._81?r(o,u._65):(2===u._81&&e(u._65),void u.then(function(n){r(o,n)},e))}var a=u.then;if("function"==typeof a){var s=new un(a.bind(u));return void s.then(function(n){r(o,n)},e)}}t[o]=u,0===--i&&n(t)}if(0===t.length)return n([]);for(var i=t.length,o=0;o<t.length;o++)r(o,t[o])})},un.reject=function(n){return new un(function(t,e){e(n)})},un.race=function(n){return new un(function(t,e){n.forEach(function(n){un.resolve(n).then(t,e)})})},un.prototype.catch=function(n){return this.then(null,n)};var vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},dn=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},mn=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),_n=function n(t,e,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:n(o,e,r)}if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(r)},gn=function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},yn=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t},wn=function(){function n(){var t=this;dn(this,n),this._isResolved=!1,this._isRejected=!1,this._resolveHandler=O,this._rejectHandler=O,this.promise=new bn(function(n,e){t._resolveHandler=n,t._rejectHandler=e})}return mn(n,[{key:"resolve",value:function(n){this._isResolved||(this._isResolved=!0,this._resolveHandler(n))}},{key:"reject",value:function(n){this._isRejected||(this._isRejected=!0,this._rejectHandler(n))}},{key:"notify",value:function(n){this._isResolved||this._isRejected||R(this.promise,n)}}]),n}(),bn=function(n){function t(){var n;dn(this,t);for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var o=yn(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(r)));return o._progressHandlers=[],o}return gn(t,n),mn(t,[{key:"progress",value:function(n){return this._progressHandlers||(this._progressHandlers=[]),"function"==typeof n&&this._progressHandlers.push(n),this}},{key:"then",value:function(n){if("function"!=typeof n)return _n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"then",this).call(this,n);var e=_n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"then",this).call(this,function(){var e=n.apply(void 0,arguments);return e instanceof t&&e.progress(function(n){R(r,n)}),e}),r=new t(function(n,t){e.then(n,t)});return r}}]),t}(an),kn=function(){return"undefined"!=typeof performance&&"now"in performance?function(){return performance.now()}:"object"===("undefined"==typeof process?"undefined":vn(process))&&"[object process]"===process.toString()?function(){function n(){var n=process.hrtime();return 1e9*n[0]+n[1]}var t=n();return function(){return(n()-t)/1e6}}():function(){var n=Date.now();return function(){return Date.now()-n}}()}(),jn=function(){function n(e,r){if(dn(this,n),"function"!=typeof r)throw new TypeError("Timer callback needs to be a function");this._tickHandler=H,this._timeOffset=0,this._callback=r,this._prev=0,this.isRunning=!1,this.time=this._initialTime=t(e,1e3/60),this.interval=0,this.reset()}return mn(n,[{key:"_callTickHandler",value:function(){var n=this;this.isRunning&&this._tickHandler(function(){return 0===n.iterations?(n._callback&&n._callback(0,0,0),n._prev=kn(),n.iterations=1,n._callTickHandler()):(n.interval=kn()-n._prev,n.interval<=n.time+n._timeOffset?n._callTickHandler():(n.elapsed+=n.interval,n._callback&&n._callback(n.interval,n.iterations,n.elapsed),void(n.isRunning&&(n._prev=kn(),n.iterations+=1,n._callTickHandler()))))})}},{key:"run",value:function(){return this.isRunning?this:(this._prev=kn(),this.isRunning=!0,this._callTickHandler(),this)}},{key:"stop",value:function(){var n=this.elapsed;return this.isRunning=!1,this.reset(),n}},{key:"reset",value:function(){return this._prev=0,this.elapsed=0,this.iterations=0,this.interval=0,this.time=this._initialTime,this}}]),n}(),On=function(n){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;dn(this,t);var r=yn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,e));return r._tickHandler=Tn,r._timeOffset=-5,r}return gn(t,n),t}(jn),Tn=function(){var n;if("object"===("undefined"==typeof window?"undefined":vn(window))){var t=[window.requestAnimationFrame,window.webkitRequestAnimationFrame,window.mozRequestAnimationFrame];t.forEach(function(t){n||"function"==typeof t&&(n=t.bind(window))})}return n?n:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;setTimeout(n,0)}}(),Rn=["fps","hz","ms","s","m"],Hn=2*Math.PI-1e-4;n.clamp=e,n.defer=T,n.delay=P,n.drunk=M,n.dust=F,n.env=q,n.exp=A,n.frames=N,n.metro=x,n.ms=C,n.now=kn,n.rand=E,n.scale=S,n.sine=D,n.wait=z,n.walk=I,Object.defineProperty(n,"__esModule",{value:!0})});
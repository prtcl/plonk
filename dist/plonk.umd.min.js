!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define("plonk",["exports"],n):n(t.plonk=t.plonk||{})}(this,function(t){"use strict";function n(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null===t||"undefined"==typeof t?n:("string"==typeof t&&(t=+t),isNaN(t)?n:"number"!=typeof t?n:t)}function e(t,e,r){return t=n(t,0),e=n(e,0),r=n(r,1),arguments.length<=2&&(r=e||1,e=0),Math.min(Math.max(t,e),r)}function r(t){G.length||(L(),J=!0),G[G.length]=t}function i(){for(;Q<G.length;){var t=Q;if(Q+=1,G[t].call(),Q>U){for(var n=0,e=G.length-Q;e>n;n++)G[n]=G[n+Q];G.length-=Q,Q=0}}G.length=0,Q=0,J=!1}function o(t){var n=1,e=new X(t),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){n=-n,r.data=n}}function u(t){return function(){function n(){clearTimeout(e),clearInterval(r),t()}var e=setTimeout(n,0),r=setInterval(n,50)}}function s(){if($.length)throw $.shift()}function a(t){var n;n=Z.length?Z.pop():new f,n.task=t,Y(n)}function f(){this.task=null}function c(){}function l(t){try{return t.then}catch(t){return rt=t,it}}function h(t,n){try{return t(n)}catch(t){return rt=t,it}}function p(t,n,e){try{t(n,e)}catch(t){return rt=t,it}}function v(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,t!==c&&k(t,this)}function d(t,n,e){return new t.constructor(function(r,i){var o=new v(c);o.then(r,i),m(t,new b(n,e,o))})}function m(t,n){for(;3===t._81;)t=t._65;return v._10&&v._10(t),0===t._81?0===t._45?(t._45=1,void(t._54=n)):1===t._45?(t._45=2,void(t._54=[t._54,n])):void t._54.push(n):void g(t,n)}function g(t,n){et(function(){var e=1===t._81?n.onFulfilled:n.onRejected;if(null===e)return void(1===t._81?y(n.promise,t._65):_(n.promise,t._65));var r=h(e,t._65);r===it?_(n.promise,rt):y(n.promise,r)})}function y(t,n){if(n===t)return _(t,new TypeError("A promise cannot be resolved with itself."));if(n&&("object"==typeof n||"function"==typeof n)){var e=l(n);if(e===it)return _(t,rt);if(e===t.then&&n instanceof v)return t._81=3,t._65=n,void w(t);if("function"==typeof e)return void k(e.bind(n),t)}t._81=1,t._65=n,w(t)}function _(t,n){t._81=2,t._65=n,v._97&&v._97(t,n),w(t)}function w(t){if(1===t._45&&(m(t,t._54),t._54=null),2===t._45){for(var n=0;n<t._54.length;n++)m(t,t._54[n]);t._54=null}}function b(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function k(t,n){var e=!1,r=p(t,function(t){e||(e=!0,y(n,t))},function(t){e||(e=!0,_(n,t))});e||r!==it||(e=!0,_(n,rt))}function j(t){var n=new ut(ut._61);return n._81=1,n._65=t,n}function O(){}function R(){return new wt}function H(t,n){t._progressHandlers&&nt(function(){t._progressHandlers.forEach(function(t){t(n)})})}function T(){return kt()}function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;setTimeout(t,0)}function E(t){function e(){i.resolve(o.elapsed),o.stop()}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,i=new wt,o=new jt(t,function(){var u=r(o.interval,o.iterations,o.elapsed,e);o.time=t=n(u,t),i.notify(o.interval)});return o.run(),i.promise}function M(t,e){return arguments.length<=1?(e=n(t,1),t=0):(t=n(t,0),e=n(e,1)),Math.random()*(e-t)+t}function F(t,r,i){t=n(t,0),r=n(r,1),i=e(n(i,.1),0,1),arguments.length<=1&&(r=t||1,t=0);var o=M(t,r);return function(u){return i=n(u,i),o=e(o+r*M(-1,1)*i,t,r)}}function x(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O;return t=n(t,10),e=n(e,100),arguments.length<=2&&(e=t,t=0),E(M(t,e),function(n,i,o,u){return r(n,i,o,u),M(t,e)})}function S(t){function n(t){r.resolve(t),i.stop()}var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,r=new wt,i=new jt(t,function(){var t=e(i.interval,i.iterations,i.elapsed,n);r.notify(t)});return i.run(),r.promise}function q(t,r,i,o,u){return t=n(t,0),r=n(r,0),i=n(i,1),o=n(o,0),u=n(u,1),o+(e(t,r,i)-r)*(u-o)/(i-r)}function A(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O;return t=n(t,0),e=n(e,1),r=n(r,100),S(1e3/60,function(n,o,u,s){u>=r&&s(e);var a=q(u,0,r,t,e);return i(a),a})}function N(t){return t=n(t,0),Math.pow(e(t,0,1),Math.E)}function C(t){function r(){o.resolve(u.elapsed),u.stop()}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;2===arguments.length?t=e(n(t,60),1,60):1===arguments.length&&(i=t||i,t=60);var o=new wt,u=new Ot(1e3/t,function(){var s=i(u.interval,u.iterations,u.elapsed,r);"number"==typeof s&&(t=e(n(s,t),0,60),0===t?r():u.time=1e3/t),o.notify(u.interval)});return u.run(),o.promise}function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ms",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=n(r,0);if("string"==typeof t){t=t.toLowerCase();for(var o=0;o<Ht.length;o++)if(-1!==t.indexOf(Ht[o])){e=Ht[o],t=t.replace(" ","").replace(e,"");break}t=+t}if(null===t||"undefined"==typeof t)return i;if(isNaN(t))return i;switch(e){case"hz":i=1/t*1e3;break;case"ms":i=t;break;case"s":i=1e3*t;break;case"m":i=60*t*1e3}return i}function z(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;t=n(t,0);var i=0;return S(1e3/60,function(o,u,s,a){i>=t?i=0:i+=o;var f=q(i,0,t,0,Tt),c=e(Math.sin(f),-1,1),l=r(c,i,s,a);return t=n(l,t),c})}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,r=new wt,i=new jt(n(t,0),function(n,o,u){t>u||(e(n),r.resolve(n),i.stop())});return i.run(),r.promise}function K(t,e,r){t=n(t,10),e=n(e,100),arguments.length<=2&&(e=t,t=0);var i=F(t,e);return E(i(),function(t,n,e,o){var u=r(t,n,e,o);return i(u)})}var L,W="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},B=r,G=[],J=!1,Q=0,U=1024,V="undefined"!=typeof W?W:self,X=V.MutationObserver||V.WebKitMutationObserver;L="function"==typeof X?o(i):u(i),r.requestFlush=L,r.makeRequestCallFromTimer=u;var Y=B,Z=[],$=[],tt=Y.makeRequestCallFromTimer(s),nt=a;f.prototype.call=function(){try{this.task.call()}catch(t){a.onerror?a.onerror(t):($.push(t),tt())}finally{this.task=null,Z[Z.length]=this}};var et=B,rt=null,it={},ot=v;v._10=null,v._97=null,v._61=c,v.prototype.then=function(t,n){if(this.constructor!==v)return d(this,t,n);var e=new v(c);return m(this,new b(t,n,e)),e};var ut=ot,st=ut,at=j(!0),ft=j(!1),ct=j(null),lt=j(void 0),ht=j(0),pt=j("");ut.resolve=function(t){if(t instanceof ut)return t;if(null===t)return ct;if(void 0===t)return lt;if(t===!0)return at;if(t===!1)return ft;if(0===t)return ht;if(""===t)return pt;if("object"==typeof t||"function"==typeof t)try{var n=t.then;if("function"==typeof n)return new ut(n.bind(t))}catch(t){return new ut(function(n,e){e(t)})}return j(t)},ut.all=function(t){var n=Array.prototype.slice.call(t);return new ut(function(t,e){function r(o,u){if(u&&("object"==typeof u||"function"==typeof u)){if(u instanceof ut&&u.then===ut.prototype.then){for(;3===u._81;)u=u._65;return 1===u._81?r(o,u._65):(2===u._81&&e(u._65),void u.then(function(t){r(o,t)},e))}var s=u.then;if("function"==typeof s){var a=new ut(s.bind(u));return void a.then(function(t){r(o,t)},e)}}n[o]=u,0===--i&&t(n)}if(0===n.length)return t([]);for(var i=n.length,o=0;o<n.length;o++)r(o,n[o])})},ut.reject=function(t){return new ut(function(n,e){e(t)})},ut.race=function(t){return new ut(function(n,e){t.forEach(function(t){ut.resolve(t).then(n,e)})})},ut.prototype.catch=function(t){return this.then(null,t)};var vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},mt=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),gt=function t(n,e,r){null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,e);if(void 0===i){var o=Object.getPrototypeOf(n);return null===o?void 0:t(o,e,r)}if("value"in i)return i.value;var u=i.get;return void 0===u?void 0:u.call(r)},yt=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},_t=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},wt=function(){function t(){var n=this;dt(this,t),this._isResolved=!1,this._isRejected=!1,this._resolveHandler=O,this._rejectHandler=O,this.promise=new bt(function(t,e){n._resolveHandler=t,n._rejectHandler=e})}return mt(t,[{key:"resolve",value:function(t){this._isResolved||(this._isResolved=!0,this._resolveHandler(t))}},{key:"reject",value:function(t){this._isRejected||(this._isRejected=!0,this._rejectHandler(t))}},{key:"notify",value:function(t){this._isResolved||this._isRejected||H(this.promise,t)}}]),t}(),bt=function(t){function n(){var t;dt(this,n);for(var e=arguments.length,r=Array(e),i=0;e>i;i++)r[i]=arguments[i];var o=_t(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(r)));return o._progressHandlers=[],o}return yt(n,t),mt(n,[{key:"progress",value:function(t){return this._progressHandlers||(this._progressHandlers=[]),"function"==typeof t&&this._progressHandlers.push(t),this}},{key:"then",value:function(t){if("function"!=typeof t)return gt(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"then",this).call(this,t);var e=gt(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"then",this).call(this,function(){var e=t.apply(void 0,arguments);return e instanceof n&&e.progress(function(t){H(r,t)}),e}),r=new n(function(t,n){e.then(t,n)});return r}}]),n}(st),kt=function(){return"undefined"!=typeof performance&&"now"in performance?function(){return performance.now()}:"object"===("undefined"==typeof process?"undefined":vt(process))&&"[object process]"===process.toString()?function(){function t(){var t=process.hrtime();return 1e9*t[0]+t[1]}var n=t();return function(){return(t()-n)/1e6}}():function(){var t=Date.now();return function(){return Date.now()-t}}()}(),jt=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;dt(this,t),this._tickHandler=P,this._timeOffset=0,this.isRunning=!1,this.time=n(e,1e3/60),this.initialTime=this.time,this.callback=r,this.reset()}return mt(t,[{key:"run",value:function(){return this.isRunning?void 0:(this.isRunning=!0,this.prev=T(),this.tick(),this)}},{key:"tick",value:function(){var t=this;this.isRunning&&this._tickHandler(function(){return 0===t.iterations?(t.callback(0,0,0),t.prev=T(),t.iterations=1,t.tick()):(t.interval=T()-t.prev,t.interval<=t.time+t._timeOffset?t.tick():(t.elapsed+=t.interval,t.callback(t.interval,t.iterations,t.elapsed),void(t.isRunning&&(t.prev=T(),t.iterations+=1,t.tick()))))})}},{key:"stop",value:function(){var t=this.elapsed;return this.isRunning=!1,this.reset(),t}},{key:"reset",value:function(){return this.elapsed=0,this.iterations=0,this.interval=0,this.prev=0,this.time=this.initialTime,this}}]),t}(),Ot=function(t){function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;dt(this,n);var r=_t(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e));return r._tickHandler=Rt,r._timeOffset=-5,r}return yt(n,t),n}(jt),Rt=function(){var t;if("object"===("undefined"==typeof window?"undefined":vt(window))){var n=[window.requestAnimationFrame,window.webkitRequestAnimationFrame,window.mozRequestAnimationFrame];n.forEach(function(n){t||"function"==typeof n&&(t=n.bind(window))})}return t?t:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;setTimeout(t,0)}}(),Ht=["hz","ms","s","m"],Tt=2*Math.PI-1e-4;t.clamp=e,t.defer=R,t.delay=E,t.drunk=F,t.dust=x,t.env=A,t.exp=N,t.frames=C,t.metro=S,t.ms=D,t.now=T,t.rand=M,t.scale=q,t.sine=z,t.wait=I,t.walk=K,Object.defineProperty(t,"__esModule",{value:!0})});